<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board">

	<select id = "allList" resultType="com.javaex.vo.UserBoardVo">
		<![CDATA[
				 select b.no boardno, title, content, hit, to_char(b.reg_date, 'YY-MM-DD HH:MI:SS') regDate, user_no, name 
				 from board b, users u 
				 where b.user_no = u.no 
				 order by boardno desc
		]]>
	</select>
	
	<insert id = "write" parameterType="com.javaex.vo.BoardVo">
		<![CDATA[ 
				insert into board values(seq_board_no.nextval, #{title}, #{content}, 0, sysdate, #{user_no})
		]]>
	
	</insert>
	
	<delete id= "delete" parameterType="int">
		<![CDATA[
				delete from board where no = #{no}
		]]>
	</delete>
	
	<select id= "getArticle" parameterType="int" resultType="com.javaex.vo.BoardVo">
		<![CDATA[
				select no, title, content, user_no, hit from board where no = #{no}
		]]>
	</select>
	
	<update id= "hit" parameterType= "int">
		<![CDATA[
				update board set hit = hit+1 where no = #{no}
		]]>
	</update>
	
	<update id= "modify" parameterType = "com.javaex.vo.BoardVo">
		<![CDATA[
				update board  set content = #{content}, title = #{title} 
			    where no = #{no}
		]]>
	</update>
	
	<select id= "search" parameterType="String" resultType="com.javaex.vo.UserBoardVo">
		<![CDATA[
				select b.no boardno, title, name, hit, to_char(b.reg_date, 'YY-MM-DD HH:MI:SS') regDate 
				from board b, users u 
				where b.user_no = u.no 
				and title like #{kwd}
				order by boardno desc
		]]>
	</select>
	
</mapper>
	